(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c,o,r=n(30),a=n(16),l=(n(39),n(40),n(41),n(7)),s=n(4),i=n(0),d=n(2),u="https://mate.academy/students-api",j=n(10),h=n.n(j);!function(e){e.All="All",e.Active="Active",e.Completed="Completed"}(c||(c={})),function(e){e.All="",e.Active="active",e.Completed="completed"}(o||(o={}));var f,b=n(3),m=[{name:c.All,way:o.All},{name:c.Active,way:o.Active},{name:c.Completed,way:o.Completed}],p=function(){return Object(b.jsx)("ul",{className:"filters",children:m.map((function(e){var t=e.name,n=e.way;return Object(b.jsx)("li",{children:Object(b.jsx)(a.b,{to:"../".concat(n),className:function(e){var t=e.isActive;return h()({selected:t})},children:t})},t)}))})},O=n(49),x=n(48),g=function(e){var t=e.todo,n=e.handleDeleteTodo,c=e.handleUpdateTodo,o=t.id,r=t.completed,a=t.title,l=Object(i.useState)(0),d=Object(s.a)(l,2),u=d[0],j=d[1],f=Object(i.useState)(a),m=Object(s.a)(f,2),p=m[0],O=m[1],x=Object(i.useRef)(null);Object(i.useEffect)((function(){u===o&&x.current&&x.current.focus()}),[u]);var g=function(){return 0!==u&&p.trim()?(c(u,{title:p}),j(0)):n(u)};return Object(b.jsxs)("li",{className:h()({completed:r,editing:o===u}),children:[Object(b.jsxs)("div",{className:"view",children:[Object(b.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:r,onClick:function(){return c(o,{completed:!r})}}),Object(b.jsx)("label",{htmlFor:u===o?"toggle-view":"",onDoubleClick:function(){return j(o)},children:a}),Object(b.jsx)("button",{"aria-label":"deleteTodo",type:"button",className:"destroy","data-cy":"deleteTodo",onClick:function(){return n(o)}})]}),Object(b.jsx)("input",{type:"text",ref:x,className:"edit",value:p,onChange:function(e){O(e.target.value)},onBlur:g,onKeyUp:function(e){13===e.keyCode&&g(),27===e.keyCode&&j(0)}})]},o)},v=function(e){var t=e.items,n=e.handleDeleteTodo,c=e.handleUpdateTodo;return Object(b.jsx)("ul",{className:"todo-list","data-cy":"todoList",children:Object(b.jsx)(O.a,{children:t.map((function(e){return Object(b.jsx)(x.a,{timeout:300,classNames:"item",children:Object(b.jsx)(g,{todo:e,handleDeleteTodo:n,handleUpdateTodo:c},e.id)},e.id)}))})})};!function(e){e.None="",e.Add="Unable to add todo",e.Delete="Unable to delete todo",e.Update="Unable to update todo",e.Get="Unable to get todos"}(f||(f={}));var y=function(e){var t=e.errorMessage,n=e.isError;return Object(b.jsx)("div",{className:h()("error-message",{hidden:!n}),children:t})},T=function(e){var t=e.setTodos,n=e.setIsError,c=e.setErrorMessage,o=e.showAndDeleteError,r=Object(i.useState)(""),a=Object(s.a)(r,2),d=a[0],j=a[1];return Object(b.jsx)("form",{onSubmit:function(e){var r;e.preventDefault(),d.trim()&&((r={title:d,userId:11065,completed:!1},fetch("".concat(u,"/todos"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(r)}).then((function(e){if(!e.ok)throw new Error;return e.json()}))).then((function(e){t((function(t){return[].concat(Object(l.a)(t),[e])}))})).catch((function(){n(!0),c(f.Add)})).finally((function(){return o()})),j(""))},children:Object(b.jsx)("input",{type:"text","data-cy":"createTodo",value:d,className:"new-todo",placeholder:"What needs to be done?",onChange:function(e){j(e.target.value)}})})},N=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(i.useState)(!1),a=Object(s.a)(r,2),j=a[0],h=a[1],m=Object(i.useState)(f.None),O=Object(s.a)(m,2),x=O[0],g=O[1],N=Object(i.useState)(""),w=Object(s.a)(N,2),k=w[0],C=w[1],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return setTimeout((function(){h(!1),g(f.None)}),e)},A=function(e){(function(e){return fetch("".concat(u,"/todos/").concat(e),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error;return e.json()}))})(e).then((function(){o((function(t){return Object(l.a)(t.filter((function(t){return t.id!==e})))}))})).catch((function(){h(!0),g(f.Delete)})).finally((function(){return E()}))},U=function(e,t){(function(e,t){return fetch("".concat(u,"/todos/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error;return e.json()}))})(e,t).then((function(t){o((function(n){return Object(l.a)(n.map((function(n){return n.id===e?t:n})))}))})).catch((function(){h(!0),g(f.Update)})).finally((function(){return E()}))},D=function(e){if(n.length>0)switch(e){case c.Active:return n.filter((function(e){return!e.completed}));case c.Completed:return n.filter((function(e){return e.completed}));default:return n}return n},S=Object(i.useMemo)((function(){return D(c.Completed)}),[n]),M=Object(i.useMemo)((function(){return D(c.Active)}),[n]);Object(i.useEffect)((function(){return fetch("".concat(u,"/users/").concat(11065),{method:"GET"}).then((function(e){if(!e.ok)throw new Error;return e.json()})).then((function(e){return C(e.name)})),fetch("".concat(u,"/todos?userId=").concat(11065),{method:"GET"}).then((function(e){if(!e.ok)throw new Error;return e.json()})).then(o).catch((function(){h(!0),g(f.Get)})).finally((function(){E()})),clearTimeout(E())}),[]);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"todoapp",children:[Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("h1",{children:"todos"}),Object(b.jsx)("p",{className:"todoapp-username",children:k}),Object(b.jsx)(T,{setTodos:o,setIsError:h,setErrorMessage:g,showAndDeleteError:E})]}),Object(b.jsxs)("section",{className:"main",children:[Object(b.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:n.length>0&&S.length===n.length,"data-cy":"toggleAll",onClick:function(){return(M.length?M:n).map((function(e){return U(e.id,{completed:!e.completed})}))}}),Object(b.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),n.length>0&&Object(b.jsxs)(d.d,{children:[Object(b.jsxs)(d.b,{path:"/",children:[Object(b.jsx)(d.b,{index:!0,element:Object(b.jsx)(v,{items:n,handleDeleteTodo:A,handleUpdateTodo:U})}),Object(b.jsx)(d.b,{path:"active",element:Object(b.jsx)(v,{items:M,handleDeleteTodo:A,handleUpdateTodo:U})}),Object(b.jsx)(d.b,{path:"completed",element:Object(b.jsx)(v,{items:S,handleDeleteTodo:A,handleUpdateTodo:U})})]}),Object(b.jsx)(d.b,{path:"*",element:Object(b.jsx)(d.a,{to:"/"})})]})]}),n.length>0&&Object(b.jsxs)("footer",{className:"footer",children:[Object(b.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:1===M.length?"1 item left":"".concat(M.length," items left")}),Object(b.jsx)(p,{}),Object(b.jsx)("button",{type:"button",className:"clear-completed",hidden:0===S.length,onClick:function(){S.map((function(e){return A(e.id)}))},children:"Clear completed"})]})]}),Object(b.jsx)(y,{errorMessage:x,isError:j})]})};Object(r.createRoot)(document.getElementById("root")).render(Object(b.jsx)(a.a,{children:Object(b.jsx)(N,{})}))}},[[46,1,2]]]);
//# sourceMappingURL=main.8f1f7aec.chunk.js.map